!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).cradova=t()}(this,(function(){"use strict";var e,t,n,i,s,r=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},o=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class a{constructor(a,l){e.set(this,0),t.set(this,[]),n.set(this,null),i.set(this,!1),s.set(this,void 0),r(this,n,a),l&&(r(this,i,l),o(this,t).push(a))}get(){return o(this,n)}set(a){r(this,n,a),o(this,i)&&(r(this,e,o(this,e)+1),o(this,t).push(a),o(this,s)&&o(this,s).call(this,o(this,n)))}setKey(a,l){if("object"==typeof o(this,n)){if(o(this,n)[a]=l,!o(this,i))return;o(this,t).push(o(this,n)),r(this,e,o(this,e)+1)}o(this,s)&&o(this,s).call(this,o(this,n))}forward(){if(o(this,t).length>o(this,e)+1){if(!o(this,i))return;r(this,n,o(this,t)[o(this,e)+1])}}backward(){if(o(this,t).length>0&&o(this,e)>0){if(!o(this,i))return;r(this,n,o(this,t)[o(this,e)-1]),r(this,e,o(this,e)-1)}}listen(e){r(this,s,e)}}e=new WeakMap,t=new WeakMap,n=new WeakMap,i=new WeakMap,s=new WeakMap;const l={routes:{},params:{}},c=e=>{if(l.routes[e])return[l.routes[e],null];for(const t in l.routes){if(!t.includes("$"))continue;const n=e.split("/"),i=t.split("/");if(i.length===n.length){n.shift(),i.shift();let e=!0,s={};for(let s=0;s<i.length;s++){if(!i[s].includes("$")&&t.includes(n[s]+"/")&&i.indexOf(n[s])===i.lastIndexOf(n[s]))e||(e=!0);else{if(i[s].includes("$"))continue;e=!1}if(i.indexOf(n[s])!==i.lastIndexOf(n[s]))throw new Error("cradova router doesn't allow paths with multiple names")}if(e){for(let e=0;e<i.length;e++)i[e].includes("$")&&(s[i[e].split("$")[1]]=n[e]);return[l.routes[t],s]}}}return[]};l.route=function(e="/",t){l.routes[e]={controller:t}},l.navigate=function(e,t={}){if("string"!=typeof e)throw new TypeError("cradova err href must be a defined path but got "+e+" instaed");let n,i=null,s=null;if(e.includes("."))try{if(new URL(e).pathname===window.location.pathname)return;i=l.routes[new URL(e).pathname],s=new URL(e).pathname}catch(t){throw new Error("cradova: invlaid route  "+e)}else{if(e===window.location.pathname)return;[i,n]=c(e),i&&(l.params.params=n||null,l.params.data=t||null,s=e,window.history.pushState({},"",s),document.body.click())}},l.goTo=e=>{window.location.pathname=e},l.router=function(e){if("INPUT"===e.target.tagName)return;let t;if("A"===e.target.tagName&&(t=e.target,t&&t.href.includes("#")))return;if(e.target.parentElement&&"A"===e.target.parentElement.tagName&&(t=e.target.parentElement),t&&t.href.includes("#"))return;if(t&&t.href.includes("javascript"))return;if(e.preventDefault(),t){if(""===t.href||new URL(t.href).pathname===window.location.pathname)return;const[n,i]=c(new URL(t.href).pathname);if(!n)throw new Error("cradova err route doesn't exist  "+t.href);return l.params.event=e,l.params.params=i||null,l.params.data=l.params.data||null,n.controller(l.params),void window.history.pushState({},"",new URL(t.href).pathname)}const n=window.location.pathname,[i,s]=c(n);i&&(l.params.event=e,l.params.params=s||null,l.params.data=l.params.data||null,i.controller(l.params))},document.addEventListener("click",l.router),window.addEventListener("load",l.router),window.addEventListener("popstate",(e=>{e.preventDefault(),l.router(e)}));var f=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};class h{constructor(e){this.secondaryChildren=[],this.persist=!0;const{template:t,name:n,callBack:i,transition:s,persist:r}=e;if("function"!=typeof t)throw new Error("Cradova err: only functions that returns a cradova element is valid as screen");this.html=t,this.name=n,this.template=document.createElement("div"),this.template.style.width="100%",this.template.style.display="flex",this.template.style.flexDirection="column",this.template.id="cradova-screen-set",this.callBack=i,this.transition=s,r||(this.persist=!1)}package(e){return f(this,void 0,void 0,(function*(){if(this.template.innerHTML="","function"==typeof this.html){let t=yield this.html(e);if("function"==typeof t){if(t=t(),!(t instanceof HTMLElement))throw new Error("Cradova err only parent with descendants is valid");this.template.append(t)}}this.template.append(...this.secondaryChildren)}))}onActivate(e){this.callBack=e}addChild(...e){for(let t=0;t<e.length;t++)e[t]&&e[t]instanceof HTMLElement&&this.secondaryChildren.push(e[t]),e[t]&&"function"==typeof e[t]&&this.secondaryChildren.push(e[t]())}detach(){var e;const t=document.querySelectorAll("#cradova-screen-set");for(let n=0;n<t.length;n++){const i=t[n];this.transition&&i.classList.remove("CRADOVA-UI-"+this.transition),null===(e=i.parentElement)||void 0===e||e.removeChild(i)}}Activate(e){var t;return f(this,void 0,void 0,(function*(){let n=!1;document.title!==this.name&&(this.template.firstChild||(n=!0,yield this.package(e)),this.persist||n||(yield this.package(e)),document.title=this.name,this.detach(),document.querySelector("#app-wrapper").append(this.template),this.transition&&(null===(t=this.template)||void 0===t||t.classList.add("CRADOVA-UI-"+this.transition)),this.callBack&&this.callBack(this.template.firstChild,e),window.scrollTo(0,0))}))}}h.SCALE_IN="SCALE-IN",h.SCALE_OUT="SCALE-OUT",h.CIRCLE_IN="CIRCLE-IN",h.CIRCLE_OUT="CIRCLE-OUT",h.FADE_OUT="FADE-OUT",h.FADE_IN="FADE-IN",h.SLIDE_UP="SLIDE-UP",h.SLIDE_DOWN="SLIDE-DOWN",h.SLIDE_LEFT="SLIDE-LEFT",h.SLIDE_RIGHT="SLIDE-RIGHT";var d=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};const u="1.0.0";let m,p=!1;!function(){d(this,void 0,void 0,(function*(){globalThis.localStorage||(p=!0)}))}();class y{constructor(e,t){this.put=(e,t)=>d(this,void 0,void 0,(function*(){p?yield m.writeFile(e+".json",JSON.stringify(t),"utf-8"):localStorage.setItem(e,JSON.stringify(t))})),this.get=e=>d(this,void 0,void 0,(function*(){if(!p)return JSON.parse(localStorage.getItem(e));const t=yield m.readFile("undefined/"+e+".json",{encoding:"utf-8"});if(t)return JSON.parse(t);throw new Error("JSONDB: error failed to retrieve entities from database ")})),this.validator=(e,t)=>{const n={};for(const i in this.self.columns){if(!0!==this.self.columns[i].nullable&&!Object.hasOwnProperty.call(e,i))throw new Error("JSONDB: error failed to validate incoming data because "+i+" is required for "+this.self.name+" Schema");if(!this.self.columns[i].nullable&&typeof e[i]!==this.self.columns[i].type)throw new Error("JSONDB: error failed to validate incoming data because "+i+"'s value "+e[i]+" has got a wrong data type of "+typeof e[i]+" for "+this.self.name+" should be "+this.self.columns[i].type+" type instead");if(!0===this.self.columns[i].unique)for(let n=0;n<t.length;n++){if(t[n][i]===e[i])throw new Error("JSONDB: error failed to validate incoming data because "+i+" is unique for "+this.self.name+" Schema can't have more than one instance")}n[i]=e[i]}return n},this.self=e,this.keys=t}saveWithRelations(e,t,n){return d(this,void 0,void 0,(function*(){if(!n||!e)throw new TypeError("JsonDB: error saving with relations  table name or relation cannot be null   "+JSON.stringify(n)+"   "+JSON.stringify(e));if(!e.self||!e.self.name)throw new TypeError("JsonDB: error saving with relations  table is invalid   "+JSON.stringify(e));const i=yield this.get(this.self.base_name);if(i.last_access_time=Date(),t&&"number"!=typeof t.index)throw new Error("JsonDB: save before saving with relations");if(i.tables[this.self.name][t.index]=t,n&&Array.isArray(n))for(let s=0;s<n.length;s++)i.Entities[this.self.name].relations[e.self.name]&&("many"===i.Entities[this.self.name].relations[e.self.name].type?i.tables[this.self.name][t.index].relations[e.self.name]=i.tables[this.self.name][t.index].relations[e.self.name]?[...i.tables[this.self.name][t.index].relations[e.self.name],n[s]]:[n[s]]:i.tables[this.self.name][t.index].relations[e.self.name]=n[s]);else n&&i.Entities[this.self.name].relations[e.self.name]&&("many"===i.Entities[this.self.name].relations[e.self.name].type?i.tables[this.self.name][t.index].relations[e.self.name]=i.tables[this.self.name][t.index].relations[e.self.name]?[...i.tables[this.self.name][t.index].relations[e.self.name],n]:[n]:i.tables[this.self.name][t.index].relations[e.self.name]=n);return yield this.put(this.self.base_name,i),i.tables[this.self.name][t.index]}))}save(e){return d(this,void 0,void 0,(function*(){const t=yield this.get(this.self.base_name);return t.last_access_time=Date(),"number"!=typeof e.index?(e=this.validator(e,t.tables[this.self.name]),this.self.relations&&!e.relations&&(e.relations={}),t.Entities[this.self.name].last_index+=1,e.index=t.Entities[this.self.name].last_index,t.tables[this.self.name].push(e)):t.tables[this.self.name][e.index]=e,yield this.put(this.self.base_name,t),e}))}remove(e){return d(this,void 0,void 0,(function*(){const t=yield this.get(this.self.base_name);return t.last_access_time=Date(),t.tables[this.self.name][e.index]=null,yield this.put(this.self.base_name,t),!0}))}count(){return d(this,void 0,void 0,(function*(){const e=yield this.get(this.self.base_name);return e.last_access_time=Date(),e.tables[this.self.name].length}))}getAll(){return d(this,void 0,void 0,(function*(){const e=yield this.get(this.self.base_name);return e.last_access_time=Date(),e.tables[this.self.name]}))}getWhereAny(e,t){return d(this,void 0,void 0,(function*(){const n=[];let i;const s=yield this.get(this.self.base_name);s.last_access_time=Date(),i=s.tables[this.self.name];for(let s=0;s<i.length;s++){const r=i[s];for(const[i,s]of Object.entries(e))if(r[i]&&r[i]===s&&(n.push(r),"number"==typeof t&&n.length===t))return n}return n}))}getWhereAnyPropsIncludes(e,t){return d(this,void 0,void 0,(function*(){const n=[],i=yield this.get(this.self.base_name);i.last_access_time=Date();const s=i.tables[this.self.name];for(let i=0;i<s.length;i++){const r=s[i];for(const[i,s]of Object.entries(e))if(r[i]&&"string"==typeof s&&r[i].includes(s)&&(n.push(r),"number"==typeof t&&n.length===t))return n}return n}))}getOne(e){return d(this,void 0,void 0,(function*(){let t=null;const n=yield this.get(this.self.base_name);n.last_access_time=Date();const i=n.tables[this.self.name];for(let n=0;n<i.length;n++){const s=i[n];for(const[n,i]of Object.entries(e))if(s[n]&&s[n]===i){t=s;break}}return t}))}}var g=function(e,t,n,i){return new(n||(n=Promise))((function(s,r){function o(e){try{l(i.next(e))}catch(e){r(e)}}function a(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,a)}l((i=i.apply(e,t||[])).next())}))};function w(e,t,n){var i;const s=[];for(let r=0;r<e.length;r++){const o=e[r];if(o.stateID&&o.stateID===t&&(s.push(o),"object"==typeof n))for(const e in n)if("style"!==e)if(o.style[e]&&"src"!==e)o.style[e]=n[e];else if(""!==o.style[e]||"src"===e)if("function"!=typeof o[e])if("text"!==e)if("fullscreen"!==e)if("class"!==e||"string"!=typeof n[e])if("toggleclass"!==e)if("removeclass"!==e)if("remove"!==e)if("tree"!==e)o[e]=n[e];else{if("function"==typeof n[e]&&(n[e]=n[e]()),"function"==typeof n[e]&&(n[e]=n[e]()),Array.isArray(n[e]))throw new TypeError("cradova err invalid element, should be a single element or parent element from cradova");if(!(n[e]instanceof HTMLElement))throw console.error("cradova err wrong element type: can't create element state on "+n[e]),new TypeError("cradova err invalid element, should be a html element from cradova");o.innerHTML="",o.append(n[e])}else null===(i=o.parentElement)||void 0===i||i.remove(o);else o.classList.remove(n[e]);else o.classList.toggle(n[e]);else{const t=n[e].split(" ");for(let e=0;e<t.length;e++)t[e]&&o.classList.add(t[e])}else n[e]?b(o).set():b(o).exist();else o.innerText=n[e];else o[e]();else o.style[e]=n[e];else for(const[t,i]of Object.entries(n[e]))o.style[t]=i}return s}function v(e,t){const n=document.querySelectorAll(".cra_child_doc");let i=[];if(void 0===t&&"object"==typeof e)for(const[t,s]of Object.entries(e)){const e=w(n,t,s);i.push(...e)}else if("string"==typeof e){const s=w(n,e,t);i.push(...s)}return i}function b(e){return{set(){e.requestFullscreen().catch((e=>{throw e}))},exist(){document.exitFullscreen()}}}var E,D,O,S=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},L=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};function I(e=10){function t(e){return e.toString(16).padStart(2,"0")}return n=e,n=Math.round(n),Array.from(crypto.getRandomValues(new Uint8Array(n||10)),t).join("");var n}function A(e,t){const n=e+"{\n";let i="",s="";for(const[e,n]of Object.entries(t))i+=e+": "+n+";\n";let r=document.querySelector("style");if(null!==r)return s+=r.innerHTML,s+=n+i+"}\n",void(r.innerHTML=s);r=document.createElement("style"),s+=r.innerHTML+"\n\n",s+=n+i+"}\n",r.innerHTML=s,document.head.append(r)}const N={store:(e,t)=>{localStorage.setItem(e,JSON.stringify(t))},retrieve:e=>localStorage.getItem(e),remove:e=>{localStorage.removeItem(e)},getKey:e=>window.localStorage.key(e),clear:()=>{localStorage.clear()}};E=new WeakMap,D=new WeakMap,O=new WeakMap;var C,T,_=function(e,t,n){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,n),n},x=function(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)};class M{constructor(e){C.set(this,{}),T.set(this,"cradova-memory-cache-key"),e&&_(this,C,e)}get(e){return x(this,C)[e]?x(this,C)[e]:null}set(e,t){x(this,C)[e]=t}load(){let e=localStorage.getItem(x(this,T));if(!e)return!1;e=JSON.parse(e);for(const t in e)this.set(t,e[t]);return!0}save(){const e={};for(const t in x(this,C))e[t]=x(this,C)[t];for(const t in e)if(t){localStorage.setItem(x(this,T),JSON.stringify(e));break}}}C=new WeakMap,T=new WeakMap;const k=(...e)=>{let t,n,i=[];if("object"!=typeof e[1]||e[1]instanceof HTMLElement&&!e[1].tagName?(e[1]instanceof HTMLElement||"function"==typeof e[1])&&(i=e.slice(1,e.length)):(t=e[1],(null==t?void 0:t.beforeMount)&&(n=t.beforeMount),e.length>2&&(i=e.slice(2,e.length))),e[0].raw&&(e[0]=e[0].raw[0]),"string"!=typeof e[0])return()=>"empty cradova call";const s=function(e){"object"!=typeof e&&(e=[e]);const s=function(e){if(Array.isArray(e)&&(e=e[0].trim()),!e)return{tag:"div",Classes:void 0,ID:void 0,innerValue:void 0};let t;const n=(e,t)=>{const n=[];for(let i=0;i<t.length;i++)t[i].includes(e)&&(t[i]=t[i].split(e)[0]),n.push(t[i]);return n};let i;t="|"===e.trim()[0]&&"p",e.includes("|")&&(i=e.split("|")[1],e=e.split("|")[0]&&e.split("|")[0]);const s=n("#",e.split(".")),r=n(".",e.split("#"));t||(t=s.shift()),t||(t=r.shift()),t||(t="div"),e.includes(".")||e.includes("#")||(t=e,r.length=0,s.length=0);let o,a=r[1]?r[1].trim():null;return i&&(o=i),{tag:t,className:s.join(" "),ID:a,innerValue:o}}(e[0]);return(...e)=>{let r,o,a=[],l={};for(let t=0;t<e.length;t++)if("function"==typeof e[t]||e[t]instanceof HTMLElement)a.push(e[t]);else if(e[t]instanceof HTMLElement||Array.isArray(e[t])||"object"!=typeof e[t]||e[t].tagName)"string"!=typeof e[t]||(r=e[t]);else{if(e[t].beforeMount){n=e[t].beforeMount;continue}if(e[t].composedPath)continue;l=e[t]}i.length&&a.push(...i);try{o=document.createElement(s.tag.trim())}catch(e){throw new TypeError("cradova err invalid tag given  "+s.tag)}if(o){s.className&&(o.className=s.className.trim()),s.ID&&(o.id=s.ID.trim()),s.innerValue&&o.append(s.innerValue);for(const e in t)if("style"!==e)if(""!==o.style[e]||"src"===e)if("class"!==e||"string"!=typeof t[e])if("text"!==e)try{o[e]=t[e]}catch(n){throw new Error("cradova err invalid props  "+e+" for this element type with value "+t[e])}else o.innerText=t[e];else{const n=t[e].split(" ");for(let e=0;e<n.length;e++)n[e]&&o.classList.add(n[e])}else o.style[e]=t[e];else for(const[n,i]of Object.entries(t[e]))o.style[n]=i;if(l&&"object"==typeof l&&!Array.isArray(l))for(const e in l)if("style"!==e)if("text"!==e||"string"!=typeof l[e])if("class"!==e||"string"!=typeof l[e])if("beforeMount"!==e)if("fullscreen"!==e)try{o[e]=l[e]}catch(e){console.error(e)}else t[e]?b(o).set():b(o).exist();else n=l.beforeMount;else o.classList.add(l[e]);else o.innerText=l[e];else for(const[t,n]of Object.entries(l[e]))o.style[t]=n;if(a&&a[0])for(let e=0;e<a.length;e++){if("function"==typeof a[e]){const t=a[e]();o.append(t),t.afterMount&&(t.afterMount(t),t.afterMount=void 0);continue}if(Array.isArray(a[e])){const t=a[e],n=[];for(let e=0;e<t.length;e++){if(!(t[e]instanceof HTMLElement||"function"==typeof t[e]||Array.isArray(t[e])))throw new TypeError("cradova err invalid children list, should be a html element from cradova  "+t[e]);n.push(t[e])}a=[...a.slice(0,e+1),...n,...a.slice(e+1,a.length)];continue}const t=a[e];o.append(t),t.afterMount&&(t.afterMount(t),t.afterMount=void 0)}return r&&o.append(r),o.stateID&&o.classList.add("cra_child_doc"),n&&n(o),o}}}(e);if(!s)throw new Error("Cradova err invalid element initials  "+e);return s};!function(e){const t=document.createElement("div");t.className="Cradova-app-wrappper",t.id="app-wrapper",A(".Cradova-app-wrappper",{display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",width:"100%"}),t.stateID="Cradova-app-wrappper-id",document.body.append(t);const n=window.localStorage.getItem("cradova-local-memory");e.memory=new M(n?JSON.parse(n):null)}(k);!function(e){for(let t=0;t<e.length;t++)k[e[t]]=e[t]}([function(...e){const t=document.createDocumentFragment();for(let n=0;n<e.length;n++){let i=e[n];"function"==typeof i?("function"==typeof i&&(i=i()),i instanceof HTMLElement&&t.append(i)):i instanceof HTMLElement&&t.append(i)}return t},function(e){let t,n=0,i=0;if("object"!=typeof e)throw new Error("no call given for the swipe handler");t=e;const s=document.body;s.addEventListener("touchstart",(function(e){n=e.changedTouches[0].screenX,i=e.changedTouches[0].screenY})),s.addEventListener("touchend",(function(e){const s=e.changedTouches[0].screenX-n,o=e.changedTouches[0].screenY-i,a=Math.abs(s/o),l=Math.abs(o/s);Math.abs(a>l?s:o)<10&&t.touch&&r.touch(t.touch),a>l?s>=0?t.right&&r.right(t.right):t.left&&r.left(t.left):o>=0?t.down&&r.down(t.down):t.up&&r.up(t.up)}));const r={touch:e=>e(),right:e=>e(),left:e=>e(),down:e=>e(),up:e=>e()}},function(e,t=!1){return new a(e,t)},l,h,class{constructor(){this.DB_NAME="",this.username="",this.encrypted=!1,this.initialised=!1,this.time_created=Date(),this.version=u,this.last_access_time="",this.visuality="",this.Entities={},this.tables={}}getDB(e){return d(this,void 0,void 0,(function*(){if(!p)return JSON.parse(localStorage.getItem(e));const t=yield m.readFile("undefined/"+e+".json",{encoding:"utf-8"});if(t)return JSON.parse(t);throw new Error("JSONDB: error failed to retrieve entities from database ")}))}schema(e){return new class{constructor(e,t){if(!e.columns)throw new Error("JSONDB: can't create an empty table should have some columns");t.validateColumns(e.columns),e.relations&&!function(e){for(const t in e)return!1;return!0}(e.relations)&&t.validateRelations(e.relations),this.base_name="",this.name=e.name,this.last_index=-1,this.columns=e.columns,this.relations=e.relations||null}}(e,{validateColumns:this.validateColumns,validateRelations:this.validateRelations})}init(e){return d(this,void 0,void 0,(function*(){console.log("[32m JSONDB version 1.0.0 [39m"),this.initialised=!0,this.DB_NAME=e.name,this.password=e.password||"",this.username=e.username||"",this.encrypted=e.encrypted||!1,this.time_created=Date(),this.tables={};try{let t;if(t=p?this.getDB(e.name):localStorage.getItem(e.name),t)return}catch(e){}if(!e.password)throw new Error("JSONDB: error password is empty ");if(!e.username)throw new Error("JSONDB: error username is empty ");if(p)yield m.writeFile(e.name+".json",JSON.stringify(this),"utf-8");else{let t=JSON.stringify(this);localStorage.setItem(e.name,t)}}))}createJSONDBConnection(e){return d(this,void 0,void 0,(function*(){if(!this.initialised)throw new Error("JSONDB: you haven't create a JSONDB instance yet");if(e.username!==this.username||e.password!==this.password)throw new Error("JSONDB: Access Denied");const t=yield this.getDB(this.DB_NAME);return t.last_access_time=Date(),new class{constructor(e,t){this.Entities=e,this.keys=t}getTable(e){for(const[t,n]of Object.entries(this.Entities))if(e===t)return new y(n,this.keys)}}(t.Entities)}))}validateRelations(e){const t=["many","one"];for(const n in e){const i=e[n];if("object"!=typeof i.target)throw new Error("JSONDB: wrong relationship target type given "+i.target+"  should be object only");if(!t.includes(i.type))throw new Error("JSONDB: wrong relationship type given "+i.type+"  should be many or one");if(i.cascade&&"boolean"!=typeof i.cascade)throw new Error("JSONDB: wrong cascade value given "+i.cascade+" should be true or false")}}validateColumns(e){const t=["number","string","boolean","blob"];for(const n in e){const i=e[n];if(n){if(!t.includes(i.type))throw new Error("JSONDB: wrong data type given "+i.type+"  only number, string, boolean and blob are accepted");if(i.unique&&"boolean"!=typeof i.unique)throw new Error("JSONDB: wrong unique value given "+i.unique+"  should be true or false");if(i.nullable&&"boolean"!=typeof i.nullable)throw new Error("JSONDB: wrong nullable value given "+i.nullable+"  should be true or false")}}}assemble(e){return d(this,void 0,void 0,(function*(){if(!this.initialised)throw new Error("JSONDB: you haven't create a JSONDB instance yet");try{if(yield this.getDB(this.DB_NAME))return}catch(e){}if(!Array.isArray(e)||"object"!=typeof e[0])throw new Error("JSONDB: invalid entity array list, can't be assembled");for(let t=0;t<e.length;t++)this.Entities[e[t].name]=e[t],this.Entities[e[t].name].base_name=this.DB_NAME,this.tables[e[t].name]=[];p?yield m.writeFile(this.DB_NAME+".json",JSON.stringify(this),"utf-8"):localStorage.setItem(this.DB_NAME,JSON.stringify(this))}))}},function(e,t="GET",n,i){return g(this,void 0,void 0,(function*(){return yield fetch(e,{headers:n,method:t,body:JSON.stringify(i)}).catch((n=>({text(){return g(this,void 0,void 0,(function*(){return{message:JSON.stringify(`${t} ${e} net::ERR_FAILED`)}}))}})))}))},function(e,t,n,i){return g(this,void 0,void 0,(function*(){if(t||"function"!=typeof i||(t=i),"string"!=typeof e)throw new Error("Cradova err : little Axios invalid url "+e);const s=new XMLHttpRequest;let r=new FormData;const o=n&&"object"!=typeof n?"GET":"POST";if(s.addEventListener("load",(function(e){return g(this,void 0,void 0,(function*(){console.log(e.target),t(e.target)}))})),n)for(const e in n){const t=n[e];r.append(e,t)}s.addEventListener("error",(e=>t(e))),s.open(o,e,!0),s.send(r)}))},function(e=.3){const t=`:root {\n--animation-timing: ${e+""}s;\n}\n\n.CRADOVA-UI-CIRCLE-OUT {\n  animation: circle-out var(--animation-timing) ease forwards; \n}\n\n.CRADOVA-UI-CIRCLE-IN {\n  animation: circle-in var(--animation-timing) ease forwards; \n}\n\n.CRADOVA-UI-SCALE-IN {\n  animation: scale-in var(--animation-timing) ease forwards;\n}\n\n.CRADOVA-UI-SCALE-OUT {\n  animation: scale-out var(--animation-timing) ease forwards;\n}\n\n.CRADOVA-UI-SLIDE-RIGHT {\n  animation: slide-right var(--animation-timing) ease forwards;\n}\n\n.CRADOVA-UI-SLIDE-LEFT {\n  animation: slide-left var(--animation-timing) ease forwards;\n}\n\n.CRADOVA-UI-SLIDE-UP {\n  animation: slide-up var(--animation-timing) ease forwards;\n}\n\n.CRADOVA-UI-SLIDE-DOWN {\n  animation: slide-down var(--animation-timing) ease forwards;\n}\n\n/* not done yet */ \n\n.CRADOVA-UI-FADE-IN {\n  animation: fade-in var(--animation-timing) ease forwards;\n}\n\n.CRADOVA-UI-FADE-OUT {\n  animation: fade-out var(--animation-timing) ease forwards;\n}\n\n/* ultility classes */\n\n.CIRCLE-OUT {\n  animation: fadeoff var(--animation-timing) ease forwards;\n}\n\n.CIRCLE-IN {\n  animation: fadein var(--animation-timing) ease forwards;\n}\n\n/* animations  */\n\n@keyframes circle-out {\n  from {\n    border-radius: 49%;\n    /* width: 100%; */\n    /* height: 100%; */\n    margin: auto;\n    margin-top: 40%;\n  }\n  \n  to  {\n    border-radius: 100%;\n    /* width: 0%; */\n    /* height: 0%; */\n    margin: auto;\n    margin-top: 50%;\n  }\n}\n\n@keyframes circle-in {\n  from {\n    border-radius: 100%;\n    /* width: 0%; */\n    /* height: 0%; */\n    margin: auto;\n    margin-top: 40%;\n  }\n  to  {\n    border-radius: 0%;\n    /* width: 100vw; */\n    /* height: 100vh; */\n    margin: auto;\n    margin-top: 0%;\n  }\n}\n\n@keyframes scale-in {\n  from {\n   transform: scale(1);\n  } \n  to {\n   transform: scale(0);\n  }\n}\n\n\n@keyframes scale-out {\n  from {\n    transform: scale(0);\n    } \n  to {\n    transform: scale(1);\n   }\n}\n\n@keyframes slide-right {\n  from {\n  margin-left: -140%;\n  }\n  to  {\n  margin-left: 0%;\n  }\n}\n\n@keyframes slide-left {\n  from {\n  margin-left: 140%;\n  }\n  to  {\n  margin-left: 0%;\n  }\n}\n\n@keyframes slide-up {\n  from {\n  margin-top: 140%;\n  }\n  to  {\n  margin-top: 0%;\n  }\n}\n\n@keyframes slide-down {\n  from {\n  margin-top: -140%;\n  }\n  to  {\n  margin-top: 0%;\n  }\n}\n\n@keyframes fade-in {\n  from {\n  opacity: 0;\n  }\n  to  {\n  opacity: 1;\n  }\n}\n\n@keyframes fade-out {\n  from {\n  opacity: 1;\n  }\n  to  {\n  opacity: 0;\n  }\n}\n\n/* ultility animations */\n\n\n@keyframes fadeoff {\n  50%{\n    opacity: 0;\n  }\n  100% {\n    opacity: 0;\n  }\n} \n\n@keyframes fadein {\n  0% { \n    opacity: 0;\n}\n  70%{\n    opacity: 1;\n  }\n  100% {\n    opacity: 1;\n  }\n} `,n=document.createElement("style");n.innerHTML=t,document.head.appendChild(n)},function(e,t){return e?t(e):" "},function(e,...t){const n="@keyframes "+e+" {\n",i=t.length;let s=" ",r=" ",o="  ",a=null;const l=e=>{s="  ";for(const[n,i]of Object.entries(t[e][1]))s+=n+": "+i+";\n";return r+=t[e][0]+"{\n"+s+"}\n",r};for(let e=0;e<i;e++)o+=l(e);let c=document.querySelector("style");null===c&&(c=document.createElement("style")),c.media="screen",a=c.innerHTML+"\n\n",a+=n+o+"}\n",c.innerHTML=a,document.head.append(c)},function(){window.addEventListener("beforeunload",(e=>{const t=e||window.event;return t&&(t.preventDefault(),t.returnValue=""),""}))},A,function(e,...t){const n="@media only screen and ("+e+") {\n";let i="  ",s=" ";const r=t.length;let o,a="  ";const l=e=>{i="  ";for(const[n,s]of Object.entries(t[e][1]))i+=n+": "+s+";\n";return s+=t[e][0]+"{\n"+i+"}\n",s};for(let e=0;e<r;e++)a+=l(e);let c=document.querySelector("style");null===c&&(c=document.createElement("style")),c.media="screen",o=c.innerHTML+"\n\n",o+=n+a+"}\n",c.innerHTML=o,document.head.append(c)},N,class{constructor(e){E.set(this,void 0),D.set(this,I()),O.set(this,null),S(this,E,e)}build(e){if(!e[0])return;const t=[];for(let n=0;n<e.length;n++){const i=e[n],s=L(this,E).call(this,i)({stateID:L(this,D)});t.push(s)}return t}update(e){var t;if(e[0]){if(L(this,O)||S(this,O,v(L(this,D),{display:"none"})[0].parentElement),v(L(this,D),{remove:!0}),!L(this,O))throw new Error("cannot update list");for(let n=0;n<e.length;n++){const i=e[n],s=L(this,E).call(this,i)({stateID:L(this,D)});null===(t=L(this,O))||void 0===t||t.append(s)}}}},function(e="div",t={}){return t.stateID=I(),[k(e,t),v.bind(null,t.stateID)]},function(){const e=e=>k("div",Object.assign(Object.assign({},e),{innerHTML:'<svg width="20" height="20" viewBox="0 0 10 10" fill="none" xmlns="http://www.w3.org/2000/svg">\n <path d="M4.49975 5.625C4.3402 5.6242 4.18282 5.58788 4.03904 5.5187C3.89526 5.44951 3.76869 5.34919 3.6685 5.225L1.03725 2.0375C0.8835 1.84561 0.786745 1.61438 0.758014 1.37017C0.729283 1.12596 0.769733 0.878589 0.874753 0.65625C0.959928 0.463017 1.09892 0.298383 1.27514 0.182014C1.45136 0.0656449 1.65734 0.00245816 1.8685 0H7.131C7.34216 0.00245816 7.54815 0.0656449 7.72437 0.182014C7.90058 0.298383 8.03958 0.463017 8.12475 0.65625C8.22977 0.878589 8.27023 1.12596 8.24149 1.37017C8.21276 1.61438 8.11601 1.84561 7.96226 2.0375L5.331 5.225C5.23082 5.34919 5.10424 5.44951 4.96047 5.5187C4.81669 5.58788 4.65931 5.6242 4.49975 5.625Z" fill="#2c3e50"/>\n</svg>\n'})),t=k("div",{display:"flex",position:"fixed",alignContent:"center",justifyContent:"space-around",flexDirection:"row",width:"80px",top:"4px",right:"4px",backgroundColor:"#fff",transform:"rotate(0deg)",border:"aqua 2px solid",borderRadius:"6px"},e({transform:"rotate(90deg)",onclick(){window.history.back()}}),e({transform:"rotate(270deg)",onclick(){window.history.forward()}}))();t&&document.body.append(t)}]);for(const e in k)console.log(e);return k}));
